<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Focus Companion</title>

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #2D3C59;
      color: #eaeaf0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .app {
      width: 320px;
      text-align: center;
    }

    h1 {
      font-size: 22px;
      font-weight: 500;
      margin-bottom: 10px;
    }

    .timer {
      font-size: 48px;
      margin: 20px 0;
      letter-spacing: 2px;
    }

    button {
      background: #1f2a44;
      color: white;
      border: none;
      padding: 12px 20px;
      margin: 8px;
      border-radius: 8px;
      font-size: 14px;
    }

    button:active {
      background: #2d3b5f;
    }

    .info {
      margin-top: 20px;
      font-size: 13px;
      color: #9aa0b5;
    }

    .streak {
      margin-top: 8px;
      font-size: 14px;
    }

    .footer {
      margin-top: 30px;
      font-size: 11px;
      color: #5f667f;
    }

    #history {
      margin-top: 6px;
      font-size: 12px;
      color: #b0b6cc;
    }
    
    .history-item {
      margin-top: 4px;
    }

  </style>
</head>
<body>

  <div class="app">
    <h1>Focus Companion</h1>

    <div class="timer" id="timer">25:00</div>

    <div>
      <button onclick="startTimer(25)">25 min</button>
      <button onclick="startTimer(45)">45 min</button>
    </div>
    
    <div>
      <button onclick="togglePause()" id="pauseBtn">Pause</button>
      <button onclick="stopTimer()">Stop</button>
    </div>

    
    <div class="info">
      Focus sessions today
      <div class="streak" id="sessions">0</div>
    </div>

    <div class="info">
      History
      <div id="history"></div>
    </div>

    <div class="footer">
      Built for Sujanka · 25
    </div>
  </div>

  <script>
    let paused = false;
    let timeLeft;
    let interval;
  
    const STORAGE_KEY = "focusHistory";
  
    function today() {
      return new Date().toISOString().split("T")[0];
    }
  
    function loadHistory() {
      return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
    }
  
    function saveHistory(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }
  
    function updateHistoryView() {
      const historyDiv = document.getElementById("history");
      const data = loadHistory();
      historyDiv.innerHTML = "";
  
      const days = Object.keys(data).slice(-5).reverse();
  
      days.forEach(date => {
        const d = data[date];
        const div = document.createElement("div");
        div.className = "history-item";
        div.textContent = `${date}: ${d.sessions} sessions · ${d.minutes} min`;
        historyDiv.appendChild(div);
      });
    }
  
    function getTodayStats() {
      const data = loadHistory();
      return data[today()] || { sessions: 0, minutes: 0 };
    }
  
    function updateTodayView() {
      document.getElementById("sessions").innerText =
        getTodayStats().sessions;
    }
  
    function startTimer(minutes) {
      clearInterval(interval);
      timeLeft = minutes * 60;
      updateDisplay();
  
      interval = setInterval(() => {
        timeLeft--;
        updateDisplay();
  
        if (timeLeft <= 0) {
          clearInterval(interval);
          logSession(minutes);
        }
      }, 1000);
    }
    
    function runTimer() {
      if (!paused) {
        timeLeft--;
        updateDisplay();
    
        if (timeLeft <= 0) {
          clearInterval(interval);
          logSession(Math.round((timeLeft + 1) / 60));
        }
      }
    }
    
    function stopTimer() {
      clearInterval(interval);
      paused = false;
      document.getElementById("pauseBtn").innerText = "Pause";
    }
  
    function logSession(minutes) {
      const data = loadHistory();
      const d = today();
  
      if (!data[d]) {
        data[d] = { sessions: 0, minutes: 0 };
      }
  
      data[d].sessions += 1;
      data[d].minutes += minutes;
  
      saveHistory(data);
      updateTodayView();
      updateHistoryView();
    }
  
    function updateDisplay() {
      let min = Math.floor(timeLeft / 60);
      let sec = timeLeft % 60;
      document.getElementById("timer").innerText =
        String(min).padStart(2, "0") + ":" + String(sec).padStart(2, "0");
    }
    
    function togglePause() {
      paused = !paused;
      document.getElementById("pauseBtn").innerText =
        paused ? "Continue" : "Pause";
    }

    updateTodayView();
    updateHistoryView();
  </script>


</body>
</html>



